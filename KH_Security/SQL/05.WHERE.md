# WHERE절을 이용한 조건 검색

## SELECT 실행 논리 순서 (중요)

- SELECT 문은 다음 순서로 논리적으로 실행됩니다.
```text
FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY
```
- 이 실행 순서 때문에 다음과 같은 제약이 발생합니다.
  - WHERE 절에서는 SELECT 별칭(alias)을 사용할 수 없습니다.
  - ORDER BY 절에서는 컬럼명, 별칭, 출력 순번 모두 사용할 수 있습니다.

---

## WHERE 절의 형식

- 조건을 통해 테이블의 일부 행만을 검색합니다.
-  조건은 컬럼을 대상으로 데이터를 제한합니다.

### 사용 가능한 연산자
- 비교 연산자: =, >, >=, <, <=, <>
- 논리 연산자: AND, OR, NOT

- `예시: 급여가 3000 이상인 사원 조회`
```sql
    SELECT eno, ename, sal
    FROM emp
    WHERE sal >= 3000
    ORDER BY sal DESC;
```
- ORDER BY 팁
  - ORDER BY 1, 3 DESC 처럼 출력 컬럼 순번도 사용할 수 있습니다.
  - 가독성과 유지보수를 위해 컬럼명 또는 별칭 사용을 권장합니다.
 
  ---

  ## 날짜 검색

  - 날짜 형식 변경과 확인
 
```sql
  ALTER SESSION SET NLS_DATE_FORMAT ='YYYY/MM/DD';
    - 세션 단위로 날짜 출력 형식을 고정하면 결과가 일관됩니다.

  SELECT * 
  FROM NLS_SESSION_PARAMETERS 
  WHERE PARAMETER = 'NLS_DATE_FORMAT';  
```

## 관계 연산자와 부정 연산자

- AND, OR, NOT

- 회계 업무를 담당하는 여성 사원을 검색하는 예시
```sql
  SELECT *
  FROM EMP
  WHERE job='회계' AND SEX='여';
```

- 회계 업무와 분석 업무 담당하는 사원을 검색하는 예시
```sql
  SELECT *
  FROM EMP
  WHERE job='회계' AND job='분석';
```

- 회계 업무 이외 어떤 업무가 있는지 검색하는 예시
```sql
  SELECT *
  FROM EMP
  WHERE NOT job='회계';
```

---

## NULL 비교 연산

- NULL은 값이 없음을 의미합니다.
- 일반 비교 연산자로는 NULL을 비교할 수 없습니다.
- 반드시 IS NULL 또는 IS NOT NULL을 사용해야 합니다.

- 예시
```sql
    SELECT *
    FROM emp
    WHERE comm IS NULL;
```
- `잘못된 예시`
```sql
    SELECT *
    FROM emp
    WHERE comm = NULL;
```

---

## BETWEEN .. AND 연산자

```sql
  SELECT *
  FROM emp
  WHERE sal BETWEEN 1000 AND 2000;
```

- 다음과 동일합니다.
```text
  sal >= 1000 AND sal <= 2000
```

- 날짜 예시
```sql
  SELECT * FROM emp
  WHERE hdate BETWEEN '1992/01/01' AND '1996/12/31'
  ORDER BY hdate;
```

### 잘못 기술된 BETWEEN .. AND  
```sql
  SELECT * FROM emp
  WHERE sal BETWEEN 2000 AND 1000;
```

- BETWEEN 연산자 이용시 반드시 작은 값이 먼저 와야 합니다.
- 에러가 발생하지 않고 `선택된 레코드가 없습니다.` 가 출력됩니다.

---

## IN 연산자

- 값 중에 일치하는 값이 하나라도 있으면 검색된다.
- OR 연산자와 = 연산자로 교환 가능하다.
- 가독성이 매우 우수하다.

```sql
  SELECT * FROM emp
  WHERE job IN ('개발', '분석') 
  ORDER BY JOB;
```

```sql
  job='개발' OR job='관리'
```
- WHERE 컬럼 IN (값1, 값2 ...)와 동일합니다.

---

## LIKE 연산자

- LIKE 연산자는 패턴 연산자의 일종으로 일부 문자열만을 이용해서 대상을 검색한다.
- 와일드 문자를 사용한다.
  - `%` : 문자열 공백을 포함한다.
  - `_` : 문자
 
- 예시

- 김씨 성을 가진 사원
```sql
  SELECT * FROM emp
  WHERE ename LIKE '김%';
```

- 이름이 '하늘'인 사원
```sql
  SELECT * FROM emp
  WHERE ename LIKE '%하늘';
```

- 성과 이름이 각각 한 글자인 사원을 검색한다.
```sql
  SELECT * FROM emp
  WHERE ename LIKE '__';
```
